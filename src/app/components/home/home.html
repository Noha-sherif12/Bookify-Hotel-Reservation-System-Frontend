<div class="main">
  <!-- Hero Section -->
  <section class="site-hero inner-page overlay" style="background-image: url(assets/images/hero_4.jpg)" data-stellar-background-ratio="0.5">
    <div class="container">
      <div class="row site-hero-inner justify-content-center align-items-center">
        <div class="col-md-10 text-center" data-aos="fade">
          <p class="welcome-text">Welcome To 5 <span class="fa fa-star text-warning"></span> Hotel</p>
          <h1 class="heading mb-3">A Best Place To Stay</h1>
        </div>
      </div>
    </div>
  </section>

  <div class="container">
    <!-- Date Picker Section -->
    <div class="available-rooms" data-aos="fade-up" data-aos-delay="100">
      <div class="row g-3">
        <div class="col-md-4">
          <label for="checkIn" class="form-label">Check-In Date</label>
          <input name="from" type="date" id="checkIn" class="form-control" [(ngModel)]="availableParams.from">
        </div>
        <div class="col-md-4">
          <label for="checkOut" class="form-label">Check-Out Date</label>
          <input name="to" type="date" id="checkOut" class="form-control" [(ngModel)]="availableParams.to">
        </div>
        <div class="col-md-4 d-flex align-items-end">
          <button class="btn btn-primary w-100" (click)="availableRoom()">
            <i class="bi bi-search me-2"></i>
            Search Rooms
          </button>
        </div>
      </div>
    </div>

    <!-- Login Prompt (shown when not logged in) -->
    @if (!userAuth.isAuthenticated() && availableRooms && availableRooms.length > 0) {
    <div class="alert alert-info alert-dismissible fade show mt-4" data-aos="fade-up" role="alert">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0">
          <i class="bi bi-info-circle-fill fs-4"></i>
        </div>
        <div class="flex-grow-1 ms-3">
          <h5 class="alert-heading mb-2">Want to book a room?</h5>
          <p class="mb-3">Login or create an account to add rooms to your cart and make reservations.</p>
          <div class="d-flex gap-2">
            <button class="btn btn-primary" (click)="showLoginAlert('book rooms')">
              <i class="bi bi-box-arrow-in-right me-2"></i>
              Log In
            </button>
            <a routerLink="/register" class="btn btn-outline-primary">
              <i class="bi bi-person-plus me-2"></i>
              Sign Up
            </a>
            <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        </div>
      </div>
    </div>
    }

    <!-- Available Rooms Section -->
    @if (availableRooms && availableRooms.length > 0) {
    <section class="available-rooms row g-3 container mt-4" data-aos="fade-up" data-aos-delay="200">
      <h2 class="mb-4">Available Rooms ({{ availableRooms.length }})</h2>
      @for (r of availableRooms; track r.roomNumber; let i = $index) {
      <div class="col-md-4 mb-4" data-aos="zoom-in" [attr.data-aos-delay]="300 + (i * 100)">
        <div class="card h-100 shadow-sm room-card">
          <div class="card-header bg-light">
            <h5 class="card-title mb-0">
              <i class="bi bi-door-closed me-2"></i>
              Room {{ r.roomNumber }}
            </h5>
          </div>
          <div class="card-body">
            <p class="card-text">
              <strong><i class="bi bi-tag me-1"></i> Type:</strong> {{ r.roomTypeName }} <br>
              <strong><i class="bi bi-text-paragraph me-1"></i> Description:</strong> {{ r.description }} <br>
              <strong><i class="bi bi-currency-dollar me-1"></i> Price per Night:</strong> ${{ r.pricePerNight }}
            </p>
            
            <!-- Rating Stars -->
            <div class="mb-3">
              <div class="d-flex align-items-center">
                <div class="star-rating me-2">
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-half text-warning"></i>
                </div>
                <small class="text-muted">4.5 (128 reviews)</small>
              </div>
            </div>
             <div class="mt-3">
              <small class="text-muted">
                <i class="bi bi-wifi me-1"></i> Free WiFi •
                <i class="bi bi-tv me-1"></i> Smart TV •
                <i class="bi bi-thermometer-snow me-1"></i> AC
              </small>
            </div>
          </div>
         
          <div class="card-footer bg-transparent border-top">
            <div class="d-grid gap-2">
              <!-- Add to Cart Button -->
              <button class="btn" 
                      [class.disabled]="!r.isAvailable" 
                      (click)="addToCart(r)"
                      style="background-color: #294c57; color: white; border-color: #294c57;">
                @if (r.isAvailable) {
                  <i class="bi bi-cart-plus me-2"></i>
                  Add to Cart
                } @else {
                  <i class="bi bi-slash-circle me-2"></i>
                  Unavailable
                }
              </button>
            </div>
          </div>
        </div>
      </div>
      }
    </section>
    } @else if (availableRooms && availableRooms.length === 0 && availableParams.from && availableParams.to) {
    <div class="alert alert-warning mt-4" data-aos="fade-up" role="alert">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0">
          <i class="bi bi-calendar-x fs-4"></i>
        </div>
        <div class="flex-grow-1 ms-3">
          <h5 class="alert-heading">No rooms available</h5>
          <p class="mb-0">No rooms are available for the selected dates. Please try different dates.</p>
        </div>
      </div>
    </div>
    }

    <!-- Carousel Section -->
    <div class="mt-5" data-aos="fade-up" data-aos-delay="100">
      <h3 class="text-center mb-4">Our Hotel Gallery</h3>
      <div id="carouselExample" class="carousel slide w-75 m-auto shadow-lg rounded" data-bs-ride="carousel">
        <div class="carousel-inner rounded">
          <div class="carousel-item active">
            <img src="assets/images/slider-1.jpg" class="d-block w-100" alt="Luxury Room">
            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
              <h5>Luxury Suites</h5>
              <p>Experience ultimate comfort in our premium suites.</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="assets/images/slider-2.jpg" class="d-block w-100" alt="Hotel Pool">
            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
              <h5>Infinity Pool</h5>
              <p>Relax by our stunning infinity pool with sea view.</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="assets/images/slider-3.jpg" class="d-block w-100" alt="Restaurant">
            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
              <h5>Fine Dining</h5>
              <p>Enjoy gourmet meals at our 5-star restaurant.</p>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>

    <!-- Room Types Showcase -->
    <div class="room-description d-flex justify-content-center align-items-center m-4 mt-5">
      <div class="room m-2" data-aos="fade-right" data-aos-delay="100">
        <div class="position-relative overflow-hidden rounded">
          <img src="assets/images/slider-6.jpg" class="w-100" alt="Single Room"/>
          <div class="position-absolute bottom-0 start-0 end-0 text-white text-center room-content p-3">
            <h4 class="mb-2">Single Room</h4>
            <p class="mb-0"><strong>$90</strong> / PER NIGHT</p>
          </div>
        </div>
      </div>
      <div class="room m-2" data-aos="fade-up" data-aos-delay="200">
        <div class="position-relative overflow-hidden rounded">
          <img src="assets/images/slider-5.jpg" class="w-100" alt="Family Room"/>
          <div class="position-absolute bottom-0 start-0 end-0 text-white text-center room-content p-3">
            <h4 class="mb-2">Family Room</h4>
            <p class="mb-0"><strong>$120</strong> / PER NIGHT</p>
          </div>
        </div>
      </div>
      <div class="room m-2" data-aos="fade-left" data-aos-delay="300">
        <div class="position-relative overflow-hidden rounded">
          <img src="assets/images/slider-4.jpg" class="w-100" alt="Presidential Room"/>
          <div class="position-absolute bottom-0 start-0 end-0 text-white text-center room-content p-3">
            <h4 class="mb-2">Presidential Room</h4>
            <p class="mb-0"><strong>$250</strong> / PER NIGHT</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Welcome Section -->
    <div class="bg-welcome p-5 rounded mt-5" data-aos="fade-up">
      <div class="d-flex justify-content-center align-items-center container">
        <div class="container" data-aos="fade-right">
          <h2 class="mb-4">
            <i class="bi bi-star-fill text-warning me-2"></i>
            Welcome to Bookify Hotel!
          </h2>
          <p class="lead">Experience luxury and comfort at Bookify Hotel, located in the beautiful Golden Beach on Egypt's stunning North Coast.</p>
          <p>Our 5-star hotel offers world-class amenities, breathtaking sea views, and exceptional service that will make your stay unforgettable. Whether you're here for business or leisure, we guarantee an experience like no other.</p>
          
        </div>
        <div class="ms-5 d-none d-lg-block" data-aos="fade-left" data-aos-delay="200">
          <img class="welcome-img rounded shadow-lg" src="assets/images/correctpath.jpg" alt="Hotel View">
        </div>
      </div>
    </div>

    <!-- Room Types Section -->
    @if (roomsTypes && roomsTypes.length > 0) {
    <section class="room-types row g-3 mt-5" data-aos="fade-up">
      <h3 class="text-center mb-4">Room Types & Amenities</h3>
      @for (type of roomsTypes; track type.id; let i = $index) {
      <div class="col-md-4" data-aos="zoom-in" [attr.data-aos-delay]="100 + (i * 100)">
        <div class="card shadow-sm roomTypes h-100">
          <div class="card-body text-center">
            <div class="mb-3">
              @if (type.id === 1) {
                <i class="bi bi-person-circle display-4 text-primary"></i>
              } @else if (type.id === 2) {
                <i class="bi bi-people-circle display-4 text-success"></i>
              } @else {
                <i class="bi bi-house-door display-4 text-warning"></i>
              }
            </div>
            <h5 class="card-title">{{ type.description }}</h5>
            <p class="card-text">
              <span class="badge bg-info mb-2">Type {{ type.id }}</span><br>
              <strong>Price:</strong> <span class="h5 text-primary">${{ type.pricePerNight }}</span> / night
            </p>
            <div class="mt-3">
              <small class="text-muted">
                <i class="bi bi-wifi me-1"></i> Free WiFi •
                <i class="bi bi-tv me-1"></i> Smart TV •
                <i class="bi bi-thermometer-snow me-1"></i> AC
              </small>
            </div>
          </div>
        </div>
      </div>
      }
    </section>
    } @else {
    <section data-aos="fade-up" class="text-center mt-5">
      <div class="alert alert-secondary" role="alert">
        <i class="bi bi-info-circle me-2"></i>
        No room types found. Please check back later.
      </div>
    </section>
    }

  </div> 
</div> 